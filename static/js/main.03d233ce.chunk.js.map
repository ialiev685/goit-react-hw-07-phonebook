{"version":3,"sources":["redux/phonebook/contacts-action.js","services/ApiContacts.js","redux/phonebook/contacts-operations.js","redux/phonebook/contacts-reducer.js","redux/store.js","redux/phonebook/contacts-selector.js","components/ContactForm/ContactForm.jsx","components/ContactItem/ContactItem.jsx","components/ContactsList/ContactsList.jsx","components/Section/Section.jsx","components/Filter/Filter.jsx","components/App.js","index.js"],"names":["getFilterItems","createAction","API","require","create","baseURL","fetchCreateContact","item","post","then","response","fetchDeleteContact","id","delete","fetchContacts","createAsyncThunk","a","get","contacts","data","message","statusText","console","dir","items","createReducer","fulfilled","state","action","payload","filter","isLoader","pending","error","rejected","_","actions","combineReducers","store","configureStore","reducer","devTools","process","getFilter","getIsLoader","getFilterContacts","createSelector","normalizedFilter","toLowerCase","name","includes","ContactForm","useState","setName","number","setNumber","useSelector","dispatch","useDispatch","checkDoubleName","newContact","normalizedName","some","handleChange","e","target","value","onSubmit","preventDefault","newItem","alert","contact","uuidv4","addContact","className","type","pattern","title","required","onChange","autoComplete","ContactItem","onClick","ContactsList","loading","useEffect","map","Section","children","Filter","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.03d233ce.chunk.js","sourcesContent":["import { createAction } from \"@reduxjs/toolkit\";\n\n// export const fetchRequest = createAction(\"contacts/request\");\n\n// export const fetchSuccess = createAction(\"contacts/success\");\n\n// export const fetchError = createAction(\"contacts/error\");\n\n// export const deleteItem = createAction(\"contacts/delete\");\n\nexport const getFilterItems = createAction(\"contacts/getFilter\");\n","const axios = require(\"axios\");\n\nconst API = axios.create({\n  baseURL: \"http://localhost:3001\",\n});\n\nexport const fetchContacts = () => {\n  return API.get(\"/contacts\").then((response) => response);\n};\n\nexport const fetchCreateContact = (item) => {\n  return API.post(\"/contacts\", item).then((response) => response);\n};\n\nexport const fetchDeleteContact = (id) => {\n  return API.delete(`/contacts/${id}`).then((response) => response);\n};\n","// import * as actions from \"./contacts-action\";\nimport * as API from \"../../services/ApiContacts\";\nimport { createAsyncThunk } from \"@reduxjs/toolkit\";\n\n// export const fetchContacts = () => async (dispatch) => {\n//   dispatch(actions.fetchRequest());\n\n//   const contacts = await API.fetchContacts();\n\n//   dispatch(actions.fetchSuccess(contacts.data));\n// };\n\nexport const fetchContacts = createAsyncThunk(\n  \"contacts/fetchContacts\",\n  async () => {\n    try {\n      const contacts = await API.fetchContacts();\n\n      return contacts.data;\n    } catch (err) {\n      return err.message;\n    }\n  }\n);\n\n// export const fetchCreateContact = (item) => async (dispatch) => {\n//   dispatch(actions.fetchRequest());\n//   try {\n//     const contacts = await API.fetchCreateContact(item);\n\n//     dispatch(actions.fetchSuccess([contacts.data]));\n//   } catch (err) {\n//     dispatch(actions.fetchError(err));\n//   }\n// };\n\nexport const fetchCreateContact = createAsyncThunk(\n  \"contacts/fetchCreateContact\",\n  async (item) => {\n    try {\n      const contacts = await API.fetchCreateContact(item);\n\n      return contacts.data;\n    } catch (err) {\n      return err.message;\n    }\n  }\n);\n\n// export const fetchDeleteContact = (id) => async (dispatch) => {\n//   dispatch(actions.fetchRequest());\n\n//   const requestDelete = await API.fetchDeleteContact(id);\n//   if (requestDelete.statusText === \"OK\") {\n//     dispatch(actions.deleteItem(id));\n//   }\n// };\n\nexport const fetchDeleteContact = createAsyncThunk(\n  \"contacts/fetchDeleteContact\",\n  async (id) => {\n    try {\n      const requestDelete = await API.fetchDeleteContact(id);\n      if (requestDelete.statusText === \"OK\") {\n        return id;\n      }\n    } catch (err) {\n      console.dir(err);\n      return err.message;\n    }\n  }\n);\n","import { combineReducers } from \"redux\";\nimport { createReducer } from \"@reduxjs/toolkit\";\nimport * as actions from \"./contacts-action\";\nimport {\n  fetchContacts,\n  fetchCreateContact,\n  fetchDeleteContact,\n} from \"./contacts-operations\";\n\n// const items = createReducer([], {\n//   [actions.fetchSuccess]: (state, action) => [...action.payload, ...state],\n//   [actions.deleteItem]: (state, action) =>\n//     state.filter(({ id }) => id !== action.payload),\n// });\n\nconst items = createReducer([], {\n  [fetchContacts.fulfilled]: (state, action) => [...action.payload, ...state],\n  [fetchCreateContact.fulfilled]: (state, action) => [action.payload, ...state],\n  [fetchDeleteContact.fulfilled]: (state, action) =>\n    state.filter(({ id }) => id !== action.payload),\n});\n\nconst isLoader = createReducer(false, {\n  [fetchDeleteContact.pending]: () => true,\n  [fetchContacts.pending]: () => true,\n  [fetchCreateContact.pending]: () => true,\n  [fetchDeleteContact.fulfilled]: () => false,\n  [fetchContacts.fulfilled]: () => false,\n  [fetchCreateContact.fulfilled]: () => false,\n});\n\nconst error = createReducer(null, {\n  [fetchDeleteContact.rejected]: (_, action) => action.payload,\n  [fetchDeleteContact.pending]: () => null,\n  [fetchContacts.rejected]: (_, action) => action.payload,\n  [fetchContacts.pending]: () => null,\n  [fetchCreateContact.rejected]: (_, action) => action.payload,\n  [fetchCreateContact.pending]: () => null,\n});\n\nconst filter = createReducer(\"\", {\n  [actions.getFilterItems]: (_, action) => action.payload,\n});\n\nexport default combineReducers({\n  items,\n  filter,\n  isLoader,\n  error,\n});\n","// import { createStore, combineReducers } from \"redux\";\n\nimport { configureStore } from \"@reduxjs/toolkit\";\nimport contacts from \"./phonebook/contacts-reducer\";\n\nexport const store = configureStore({\n  reducer: {\n    contacts: contacts,\n  },\n\n  devTools: process.env.NODE_ENV === \"development\",\n});\n","import { createSelector } from \"@reduxjs/toolkit\";\n\nconst getItems = (state) => state.contacts.items;\nexport const getFilter = (state) => state.contacts.filter;\nexport const getIsLoader = (state) => state.contacts.isLoader;\n\n// export const getFilterContacts = (state) => {\n//   const items = getItems(state);\n//   const filter = getFilter(state);\n//   const normalizedFilter = filter.toLowerCase();\n\n//   return items.filter(({ name }) =>\n//     name.toLowerCase().includes(normalizedFilter)\n//   );\n// };\n\nexport const getFilterContacts = createSelector(\n  [getItems, getFilter],\n  (items, filter) => {\n    const normalizedFilter = filter.toLowerCase();\n\n    return items.filter(({ name }) =>\n      name.toLowerCase().includes(normalizedFilter)\n    );\n  }\n);\n","import { useState } from \"react\";\nimport \"./ContactForm.scss\";\n\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getFilterContacts, fetchCreateContact } from \"redux/phonebook\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nconst ContactForm = () => {\n  const [name, setName] = useState(\"\");\n  const [number, setNumber] = useState(\"\");\n\n  const items = useSelector(getFilterContacts);\n  const dispatch = useDispatch();\n\n  const addContact = (newItem) => {\n    if (checkDoubleName(newItem)) {\n      alert(`${newItem.name} уже есть в контактах.`);\n      return false;\n    }\n\n    const contact = { id: uuidv4(), ...newItem };\n    dispatch(fetchCreateContact(contact));\n  };\n\n  const checkDoubleName = (newContact) => {\n    const { name } = newContact;\n    const normalizedName = name.toLowerCase();\n\n    return items.some(({ name }) => name.toLowerCase() === normalizedName);\n  };\n\n  const handleChange = (e) => {\n    const name = e.target.name;\n    const value = e.target.value;\n\n    switch (name) {\n      case \"name\":\n        setName(value);\n        break;\n      case \"number\":\n        setNumber(value);\n        break;\n      default:\n        return;\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    addContact({ name, number });\n    setName(\"\");\n    setNumber(\"\");\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"form-contacts\">\n      <label className=\"form-contacts__input\">\n        Name:\n        <input\n          className=\"form-contacts__text\"\n          type=\"text\"\n          name=\"name\"\n          pattern=\"^[a-zA-Zа-яА-Я]+(([' -][a-zA-Zа-яА-Я ])?[a-zA-Zа-яА-Я]*)*$\"\n          title=\"Имя может состоять только из букв, апострофа, тире и пробелов. Например Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan и т. п.\"\n          required\n          onChange={handleChange}\n          value={name}\n          autoComplete=\"off\"\n        />\n      </label>\n      <label className=\"form-contacts__input\">\n        Number:\n        <input\n          className=\"form-contacts__text\"\n          type=\"tel\"\n          name=\"number\"\n          pattern=\"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}\"\n          title=\"Номер телефона должен состоять цифр и может содержать пробелы, тире, круглые скобки и может начинаться с +\"\n          required\n          onChange={handleChange}\n          value={number}\n          autoComplete=\"off\"\n        />\n      </label>\n      <button type=\"submit\" className=\"form-contacts__button\">\n        Add contact\n      </button>\n    </form>\n  );\n};\n\nexport default ContactForm;\n","import \"./ContactItem.scss\";\nimport { useDispatch } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { fetchDeleteContact } from \"redux/phonebook/contacts-operations\";\n\nconst ContactItem = ({ name, number, id }) => {\n  const dispatch = useDispatch();\n\n  return (\n    <li className=\"contacts-list__item\">\n      <span>\n        {name}: {number}\n      </span>\n      <input\n        className=\"contacts-list__button\"\n        type=\"button\"\n        value=\"delete\"\n        onClick={() => dispatch(fetchDeleteContact(id))}\n      />\n    </li>\n  );\n};\n\nContactItem.propTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nexport default ContactItem;\n","import ContactItem from \"../ContactItem\";\nimport { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getIsLoader, getFilterContacts, fetchContacts } from \"redux/phonebook\";\nimport \"./ContactsList.scss\";\n\nconst ContactsList = () => {\n  const items = useSelector(getFilterContacts);\n  const loading = useSelector(getIsLoader);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchContacts());\n  }, [dispatch]);\n\n  return (\n    <div className=\"contacts-wrapper\">\n      {loading && <p className=\"contacts-wrapper__loader\">loading...</p>}\n      <ul className=\"contacts-wrapper__contacts-list\">\n        {items.map(({ id, name, number }) => (\n          <ContactItem key={id} name={name} number={number} id={id} />\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default ContactsList;\n","import \"./Section.scss\";\n\nconst Section = ({ children }) => {\n  return <section className=\"section\">{children}</section>;\n};\n\nexport default Section;\n","import \"./Filter.scss\";\n\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getFilter, getFilterItems } from \"redux/phonebook\";\n\nconst Filter = () => {\n  const filter = useSelector(getFilter);\n  const dispatch = useDispatch();\n\n  const changeFilter = (e) => dispatch(getFilterItems(e.target.value));\n\n  return (\n    <label className=\"filter-input\">\n      Поиск:\n      <input\n        className=\"filter-input__text\"\n        type=\"text\"\n        value={filter}\n        name=\"filter\"\n        onChange={changeFilter}\n      />\n    </label>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nimport ContactForm from \"./ContactForm\";\nimport ContactsList from \"./ContactsList\";\nimport Section from \"./Section\";\nimport Filter from \"./Filter\";\nimport \"./App.scss\";\n\nconst App = () => {\n  return (\n    <Section>\n      <h1 className=\"caption\">Phonebook</h1>\n      <ContactForm />\n\n      <h2 className=\"title\">Contacts</h2>\n      <Filter />\n\n      <ContactsList />\n    </Section>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { store } from \"./redux/store\";\nimport { Provider } from \"react-redux\";\n\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}